# Monitoring Stack - k3d 로컬/테스트 환경 설정
# 기본값: helm/management-base/monitoring/values.yaml

namespace: monitoring

# Grafana Alloy - 로컬에서는 비활성화 (리소스 절약)
alloy:
  enabled: false

# Prometheus - 경량화
prometheus:
  enabled: true
  storage:
    size: 10Gi
    storageClassName: "local-path"
  retention:
    time: 7d
    size: 8GB
  resources:
    limits:
      cpu: "500m"
      memory: "1Gi"
    requests:
      cpu: "200m"
      memory: "512Mi"

# Loki - 경량화
loki:
  enabled: true
  storage:
    size: 5Gi
    storageClassName: "local-path"
  retention:
    enabled: true
    period: 7d
  resources:
    limits:
      cpu: "500m"
      memory: "512Mi"
    requests:
      cpu: "200m"
      memory: "256Mi"
  limits:
    maxStreams: 5000
    ingestionRateMb: 5
    ingestionBurstSizeMb: 10

# Tempo - 경량화
tempo:
  enabled: true
  storage:
    size: 5Gi
    storageClassName: "local-path"
  retention:
    period: 168h  # 7일
  resources:
    limits:
      cpu: "500m"
      memory: "512Mi"
    requests:
      cpu: "200m"
      memory: "256Mi"
  sampling:
    rate: 0.1

# Grafana - 로컬 개발용
grafana:
  enabled: true
  admin:
    user: admin
    password: "admin"
  storage:
    size: 2Gi
    storageClassName: "local-path"
  resources:
    limits:
      cpu: "300m"
      memory: "512Mi"
    requests:
      cpu: "100m"
      memory: "256Mi"
  dashboards:
    enabled: true

# Alerting - 로컬에서 비활성화
alerting:
  enabled: false

# Ingress - 로컬에서 비활성화 (port-forward 사용)
ingress:
  enabled: false
