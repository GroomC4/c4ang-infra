# saga-tracker 개발 환경 설정 (k3d)
# docker-compose로 띄운 외부 서비스에 연결

replicaCount: 1
image:
  repository: 963403601423.dkr.ecr.ap-northeast-2.amazonaws.com/c4ang-saga-tracker
  pullPolicy: IfNotPresent
  tag: "v1.0.5"
# ECR 이미지 pull을 위한 secret
imagePullSecrets:
  - name: ecr-secret
autoscaling:
  enabled: false
resources:
  requests:
    memory: 450Mi
    cpu: 100m
  limits:
    memory: 768Mi
    cpu: 250m
# Application configuration (injected via ConfigMap)
config:
  SERVER_PORT: "8081"
  SPRING_PROFILES_ACTIVE: "dev"
  # PostgreSQL (ExternalName 서비스 사용)
  SPRING_DATASOURCE_URL: "jdbc:postgresql://saga-db:5436/saga_db"
  # Kafka (ExternalName 서비스 사용)
  SPRING_KAFKA_BOOTSTRAP_SERVERS: "kafka:9092"
  SPRING_KAFKA_PRODUCER_BOOTSTRAP_SERVERS: "kafka:9092"
  SPRING_KAFKA_CONSUMER_BOOTSTRAP_SERVERS: "kafka:9092"
# Sensitive data (injected via Secret)
secrets:
  SPRING_DATASOURCE_USERNAME: "postgres"
  SPRING_DATASOURCE_PASSWORD: "postgres"
# Istio 설정 (Dev 환경: Ambient 모드)
istio:
  ambient: true  # Sidecar 없이 ztunnel 사용
