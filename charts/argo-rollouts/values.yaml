# Argo Rollouts Helm Chart 설정
# dependency chart (argo-rollouts)의 값은 'argo-rollouts' 키 아래에 설정

namespace: argo-rollouts

argo-rollouts:
  # 컨트롤러 설정
  controller:
    replicas: 1
    metrics:
      enabled: true
      serviceMonitor:
        enabled: false  # Prometheus Operator 사용 시 true로 변경

  # Dashboard 설정
  dashboard:
    enabled: true
    service:
      type: ClusterIP
      port: 3100

  # CRD 설치 (필수)
  installCRDs: true

  # 알림 설정
  notifications:
    secret:
      create: true
    notifiers: {}

# 추가 모니터링 설정 (커스텀 리소스)
metrics:
  enabled: true
  port: 8090
  targetPort: 8090

prometheus:
  enabled: true
  scrape: true
  path: /metrics
  port: 8090

# =============================================================================
# 알림 설정
# =============================================================================
notifications:
  # Discord 알림 (나중에 활성화)
  discord:
    enabled: false  # true로 변경하여 활성화
    # Discord 서버 > 설정 > 연동 > 웹후크에서 URL 생성
    # webhookUrl은 Secret에서 관리 (argo-rollouts-notification-secret)

  # Grafana 알림
  grafana:
    enabled: true
