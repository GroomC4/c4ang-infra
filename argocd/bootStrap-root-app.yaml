# [DEPRECATED] 레거시 Root Application
# 새로운 방식은 bootstrap/root-application.yaml을 사용하세요.
# ApplicationSet 기반: argocd/applicationsets/
#
# 마이그레이션:
# 1. ./bootstrap/install-argocd.sh 실행
# 2. 또는 kubectl apply -f bootstrap/root-application.yaml -n argocd

apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: argocd-root-legacy
  namespace: argocd
  finalizers:
    - resources-finalizer.argocd.argoproj.io
  annotations:
    deprecated: "true"
    migration-target: "bootstrap/root-application.yaml"
spec:
  project: default
  source:
    repoURL: https://github.com/GroomC4/c4ang-infra.git
    targetRevision: feature/analysis
    # 레거시 매니페스트 경로 (개별 Application 정의)
    path: argocd/manifest

  destination:
    server: https://kubernetes.default.svc
    namespace: argocd

  syncPolicy: {}
#  syncPolicy:
#    automated:
#      prune: true
#      selfHeal: true
#    syncOptions:
#      - CreateNamespace=true