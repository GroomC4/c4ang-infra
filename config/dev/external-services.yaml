# =============================================================================
# External Services - Dev Environment (k3d + Docker Compose)
# =============================================================================
# Docker Desktop for Mac/Windows에서 host.docker.internal 사용
# Linux에서는 172.17.0.1 또는 host network 사용
#
# NOTE: 리소스 최적화를 위해 customer-service만 사용하는 서비스로 최소화

namespace: ecommerce

# -----------------------------------------------------------------------------
# PostgreSQL Databases
# -----------------------------------------------------------------------------
postgresql:
  enabled: true
  databases:
    customer:
      enabled: true
      externalName: "host.docker.internal"  # 로컬 Docker 호스트
      port: 5432
    # 리소스 최적화를 위해 비활성화
    product:
      enabled: false
      externalName: "host.docker.internal"
      port: 5433
    order:
      enabled: false
      externalName: "host.docker.internal"
      port: 5434
    store:
      enabled: false
      externalName: "host.docker.internal"
      port: 5435
    saga:
      enabled: false
      externalName: "host.docker.internal"
      port: 5436
    payment:
      enabled: false
      externalName: "host.docker.internal"
      port: 5437
    recommendation:
      enabled: false
      externalName: "host.docker.internal"
      port: 5438

# -----------------------------------------------------------------------------
# Redis Instances
# -----------------------------------------------------------------------------
redis:
  enabled: true
  instances:
    cache:
      enabled: true
      externalName: "host.docker.internal"
      port: 6379
    session:
      enabled: true
      externalName: "host.docker.internal"
      port: 6380

# -----------------------------------------------------------------------------
# Kafka (비활성화 - 이벤트 테스트 시 필요하면 활성화)
# -----------------------------------------------------------------------------
kafka:
  enabled: false
  externalName: "host.docker.internal"
  port: 9092
  additionalPorts:
    - name: external
      port: 9094
      targetPort: 9094

# -----------------------------------------------------------------------------
# Schema Registry (비활성화 - Kafka와 함께 사용)
# -----------------------------------------------------------------------------
schemaRegistry:
  enabled: false
  externalName: "host.docker.internal"
  port: 8081
