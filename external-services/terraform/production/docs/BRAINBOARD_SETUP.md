# Brainboard 설정 가이드

Brainboard는 Terraform 코드를 기반으로 인프라 구조를 시각화하고, Drag & Drop 방식으로 인프라를 설계할 수 있는 플랫폼입니다.

## 📋 목차

1. [Brainboard란?](#brainboard란)
2. [계정 생성](#계정-생성)
3. [프로젝트 생성](#프로젝트-생성)
4. [Terraform 코드 가져오기](#terraform-코드-가져오기)
5. [인프라 시각화](#인프라-시각화)
6. [코드 내보내기](#코드-내보내기)
7. [Git 통합](#git-통합)

## Brainboard란?

Brainboard는 다음 기능을 제공합니다:

- **시각적 인프라 설계**: Drag & Drop으로 인프라 구성
- **Terraform 코드 생성**: 시각적 편집을 Terraform 코드로 변환
- **인프라 시각화**: 기존 Terraform 코드를 다이어그램으로 시각화
- **협업 기능**: 팀원과 인프라 설계 공유 및 협업
- **비용 추정**: 인프라 비용 실시간 추정

## 계정 생성

1. **Brainboard 웹사이트 접속**
   - https://www.brainboard.co/ 접속
   - "Get Started" 또는 "Sign Up" 클릭

2. **계정 생성 방법**
   - GitHub 계정으로 로그인 (권장)
   - 이메일로 가입
   - Google 계정으로 로그인

3. **플랜 선택**
   - 무료 플랜: 개인 프로젝트용
   - 유료 플랜: 팀 협업 및 고급 기능

## 프로젝트 생성

1. **새 프로젝트 생성**
   - 대시보드에서 "New Project" 클릭
   - 프로젝트 이름 입력 (예: "c4-production")
   - 클라우드 제공자 선택 (AWS)

2. **프로젝트 설정**
   - Region: ap-northeast-2 (서울)
   - Environment: production
   - Description: 프로젝트 설명 입력

## Terraform 코드 가져오기

### 방법 1: 파일 업로드

1. **프로젝트 내에서 Import 클릭**
   - 프로젝트 대시보드에서 "Import" 버튼 클릭
   - "Upload Terraform Files" 선택

2. **파일 선택**
   - 다음 파일들을 업로드:
     - `main.tf`
     - `rds.tf`
     - `eks.tf`
     - `variables.tf`
     - `only-rds.tfvars` (변수 파일)

3. **업로드 완료**
   - Brainboard가 자동으로 코드를 분석
   - 인프라 구조가 시각화됨

### 방법 2: Git 리포지토리 연동

1. **Git 연동 설정**
   - 프로젝트 설정에서 "Git Integration" 선택
   - GitHub 리포지토리 연결
   - 리포지토리 권한 부여

2. **디렉토리 선택**
   - 리포지토리 내 Terraform 디렉토리 선택
   - 예: `production/` 디렉토리

3. **동기화**
   - Brainboard가 자동으로 코드를 가져와 시각화
   - 코드 변경 시 자동 동기화 (선택사항)

### 방법 3: 직접 코드 붙여넣기

1. **코드 편집기 열기**
   - 프로젝트에서 "Code Editor" 선택
   - Terraform 코드 직접 붙여넣기

2. **파싱 및 시각화**
   - "Parse" 버튼 클릭
   - Brainboard가 코드를 분석하여 시각화

## 인프라 시각화

### 시각화 기능

1. **다이어그램 보기**
   - 자동 생성된 인프라 다이어그램 확인
   - 리소스 간 관계 시각화
   - VPC, 서브넷, 보안 그룹 등 구조 확인

2. **리소스 탐색**
   - 각 리소스 클릭하여 상세 정보 확인
   - 설정 값 확인 및 수정
   - 의존성 관계 확인

3. **레이아웃 조정**
   - 리소스 위치 조정
   - 그룹화 및 정렬
   - 커스텀 레이아웃 저장

### 시각적 편집

1. **리소스 추가**
   - 좌측 패널에서 리소스 선택
   - 다이어그램에 드래그 앤 드롭
   - 설정 값 입력

2. **리소스 수정**
   - 리소스 클릭하여 속성 편집
   - 연결 관계 수정
   - 태그 및 메타데이터 추가

3. **리소스 삭제**
   - 리소스 선택 후 삭제
   - 의존성 확인 및 경고

## 코드 내보내기

### Terraform 코드 내보내기

1. **코드 생성**
   - "Export" 버튼 클릭
   - "Terraform Code" 선택
   - 코드 형식 선택 (HCL)

2. **다운로드**
   - 생성된 Terraform 코드 다운로드
   - 로컬 프로젝트에 적용
   - Git에 커밋

### 설정 파일 내보내기

1. **변수 파일 생성**
   - 변수 값 추출
   - `.tfvars` 파일로 내보내기

2. **문서 생성**
   - 인프라 문서 자동 생성
   - 다이어그램 포함 문서 내보내기

## Git 통합

### 자동 동기화

1. **Git 웹훅 설정**
   - Brainboard에서 Git 웹훅 설정
   - 코드 변경 시 자동 동기화

2. **양방향 동기화**
   - Brainboard에서 수정 → Git에 커밋
   - Git에서 수정 → Brainboard에 동기화

### 협업 워크플로우

1. **브랜치 작업**
   - 기능 브랜치에서 인프라 수정
   - Brainboard에서 변경사항 확인
   - Pull Request 생성

2. **리뷰 프로세스**
   - 시각적 다이어그램으로 리뷰
   - 변경사항 시각화
   - 승인 후 머지

## 고급 기능

### 비용 추정

1. **실시간 비용 계산**
   - 리소스 추가 시 비용 자동 계산
   - 월별 예상 비용 표시
   - 비용 최적화 제안

2. **비용 리포트**
   - 비용 리포트 생성
   - 리소스별 비용 분석
   - 예산 설정 및 알림

### 정책 검증

1. **보안 정책**
   - 보안 정책 자동 검증
   - 모범 사례 확인
   - 취약점 스캔

2. **컴플라이언스**
   - 규정 준수 검증
   - 정책 위반 알림
   - 자동 수정 제안

### 협업 기능

1. **팀 공유**
   - 프로젝트 팀원 초대
   - 권한 관리
   - 활동 로그

2. **댓글 및 피드백**
   - 리소스에 댓글 추가
   - 변경 요청 제출
   - 승인 워크플로우

## 문제 해결

### 코드 파싱 오류

**문제**: Terraform 코드를 파싱하지 못함

**해결 방법**:
- 코드 문법 오류 확인
- Terraform 버전 호환성 확인
- 모듈 경로 확인

### 시각화 오류

**문제**: 리소스가 제대로 시각화되지 않음

**해결 방법**:
- 리소스 타입 지원 여부 확인
- 의존성 관계 확인
- Brainboard 지원 리소스 목록 확인

### 동기화 오류

**문제**: Git 동기화가 실패함

**해결 방법**:
- Git 권한 확인
- 웹훅 설정 확인
- 리포지토리 접근 권한 확인

## 참고 자료

- [Brainboard 공식 문서](https://docs.brainboard.co/)
- [Brainboard 웹사이트](https://www.brainboard.co/)
- [지원되는 리소스 목록](https://docs.brainboard.co/supported-resources/)

## 예제 워크플로우

### 1. 기존 코드 가져오기

```bash
# 1. Brainboard에 로그인
# 2. 새 프로젝트 생성
# 3. "Import" → "Upload Terraform Files"
# 4. production/ 디렉토리의 .tf 파일들 업로드
# 5. 변수 파일(only-rds.tfvars) 업로드
```

### 2. 시각화 확인

```
# Brainboard에서 자동 생성된 다이어그램 확인:
# - VPC-APP 및 VPC-DB 구조
# - 서브넷 및 라우팅 테이블
# - RDS 인스턴스
# - 보안 그룹
# - VPC Peering 연결
```

### 3. 변경사항 적용

```
# 1. Brainboard에서 리소스 수정
# 2. "Export" → "Terraform Code"
# 3. 생성된 코드 다운로드
# 4. 로컬 프로젝트에 적용
# 5. terraform plan으로 확인
# 6. terraform apply로 배포
```

## 팁과 모범 사례

1. **정기적 동기화**
   - Git과 Brainboard를 정기적으로 동기화
   - 단일 소스 오브 트루스 유지

2. **문서화**
   - Brainboard 다이어그램을 문서에 포함
   - 팀원과 인프라 구조 공유

3. **비용 모니터링**
   - Brainboard 비용 추정 기능 활용
   - 예산 설정 및 알림 사용

4. **협업**
   - 팀원과 프로젝트 공유
   - 변경사항 리뷰 프로세스 구축

