# store-service 로컬 환경 설정
# docker-compose로 띄운 외부 서비스에 연결

replicaCount: 1

image:
  pullPolicy: IfNotPresent

# ECR 이미지 pull을 위한 secret
imagePullSecrets:
  - name: ecr-secret

autoscaling:
  enabled: false

resources:
  requests:
    memory: 512Mi
    cpu: 100m
  limits:
    memory: 1Gi
    cpu: 250m

env:
  - name: SERVER_PORT
    value: "8081"
  - name: SPRING_PROFILES_ACTIVE
    value: "local"
  # PostgreSQL (ExternalName 서비스 사용)
  - name: SPRING_DATASOURCE_MASTER_URL
    value: "jdbc:postgresql://store-db:5432/store_db"
  - name: SPRING_DATASOURCE_REPLICA_URL
    value: "jdbc:postgresql://store-db:5432/store_db"
  - name: SPRING_DATASOURCE_USERNAME
    value: "postgres"
  - name: SPRING_DATASOURCE_PASSWORD
    value: "postgres"
  # Redis (ExternalName 서비스 사용)
  - name: SPRING_DATA_REDIS_HOST
    value: "cache-redis"
  - name: SPRING_DATA_REDIS_PORT
    value: "6379"
  - name: SPRING_REDIS_PASSWORD
    value: ""
  - name: SPRING_REDISSON_ADDRESS
    value: "redis://cache-redis:6379"
  - name: SPRING_REDISSON_PASSWORD
    value: ""
  # Kafka (ExternalName 서비스 사용)
  - name: SPRING_KAFKA_BOOTSTRAP_SERVERS
    value: "kafka:9092"
  - name: SPRING_KAFKA_PRODUCER_BOOTSTRAP_SERVERS
    value: "kafka:9092"
  - name: SPRING_KAFKA_CONSUMER_BOOTSTRAP_SERVERS
    value: "kafka:9092"

# Istio 설정 (기본값 사용)
