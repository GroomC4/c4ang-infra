# =============================================================================
# External Services - Dev Environment (k3d + Docker Compose)
# =============================================================================
# k3d에서 호스트 네트워크 접근: host.k3d.internal (IP: 192.168.107.1)
# targetIP 사용 시 ClusterIP + Endpoints 패턴 (A 레코드 반환, DNS 해석 빠름)
# targetIP 미사용 시 ExternalName 패턴 (CNAME 반환, Netty DNS resolver 타임아웃 가능)

namespace: ecommerce

# k3d 호스트 IP (host.k3d.internal 해석 결과)
# 클러스터 재생성 시 변경될 수 있음
hostIP: &hostIP "192.168.107.1"

# -----------------------------------------------------------------------------
# PostgreSQL Databases
# -----------------------------------------------------------------------------
postgresql:
  enabled: true
  databases:
    customer:
      enabled: true
      targetIP: *hostIP
      port: 5432
    product:
      enabled: true
      targetIP: *hostIP
      port: 5433
    order:
      enabled: true
      targetIP: *hostIP
      port: 5434
    store:
      enabled: true
      targetIP: *hostIP
      port: 5435
    saga:
      enabled: true
      targetIP: *hostIP
      port: 5436
    payment:
      enabled: true
      targetIP: *hostIP
      port: 5437

# -----------------------------------------------------------------------------
# Redis Instances
# -----------------------------------------------------------------------------
redis:
  enabled: true
  instances:
    cache:
      enabled: true
      targetIP: *hostIP
      port: 6379
    session:
      enabled: true
      targetIP: *hostIP
      port: 6380

# -----------------------------------------------------------------------------
# Kafka
# -----------------------------------------------------------------------------
kafka:
  enabled: true
  targetIP: *hostIP
  port: 9092
  additionalPorts:
    - name: external
      port: 9094
      targetPort: 9094

# -----------------------------------------------------------------------------
# Schema Registry
# -----------------------------------------------------------------------------
schemaRegistry:
  enabled: true
  targetIP: *hostIP
  port: 8081
