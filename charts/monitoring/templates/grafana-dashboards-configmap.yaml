{{- if and .Values.grafana.enabled .Values.grafana.dashboards.enabled }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-argo-rollouts
  namespace: {{ include "monitoring.namespace" . }}
  labels:
    {{- include "monitoring.grafana.labels" . | nindent 4 }}
    grafana_dashboard: "1"
data:
  argo-rollouts-dashboard.json: |-
{{ .Files.Get "dashboards/argo-rollouts-dashboard.json" | indent 4 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-k8s-cluster
  namespace: {{ include "monitoring.namespace" . }}
  labels:
    {{- include "monitoring.grafana.labels" . | nindent 4 }}
    grafana_dashboard: "1"
data:
  kubernetes-cluster-dashboard.json: |-
{{ .Files.Get "dashboards/kubernetes-cluster-dashboard.json" | indent 4 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-k8s-pods
  namespace: {{ include "monitoring.namespace" . }}
  labels:
    {{- include "monitoring.grafana.labels" . | nindent 4 }}
    grafana_dashboard: "1"
data:
  kubernetes-pods-dashboard.json: |-
{{ .Files.Get "dashboards/kubernetes-pods-dashboard.json" | indent 4 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-istio-service
  namespace: {{ include "monitoring.namespace" . }}
  labels:
    {{- include "monitoring.grafana.labels" . | nindent 4 }}
    grafana_dashboard: "1"
data:
  istio-service-dashboard.json: |-
{{ .Files.Get "dashboards/istio-service-dashboard.json" | indent 4 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-kafka-lag
  namespace: {{ include "monitoring.namespace" . }}
  labels:
    {{- include "monitoring.grafana.labels" . | nindent 4 }}
    grafana_dashboard: "1"
data:
  kafka-lag-dashboard.json: |-
{{ .Files.Get "dashboards/kafka-lag-dashboard.json" | indent 4 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-kafka-comprehensive
  namespace: {{ include "monitoring.namespace" . }}
  labels:
    {{- include "monitoring.grafana.labels" . | nindent 4 }}
    grafana_dashboard: "1"
data:
  kafka-comprehensive-dashboard.json: |-
{{ .Files.Get "dashboards/kafka-comprehensive-dashboard.json" | indent 4 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-kafka-broker-failure-test
  namespace: {{ include "monitoring.namespace" . }}
  labels:
    {{- include "monitoring.grafana.labels" . | nindent 4 }}
    grafana_dashboard: "1"
data:
  kafka-broker-failure-test-dashboard.json: |-
{{ .Files.Get "dashboards/kafka-broker-failure-test-dashboard.json" | indent 4 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-kafka-broker-failure-test-clean
  namespace: {{ include "monitoring.namespace" . }}
  labels:
    {{- include "monitoring.grafana.labels" . | nindent 4 }}
    grafana_dashboard: "1"
data:
  kafka-broker-failure-test-clean.json: |-
{{ .Files.Get "dashboards/kafka-broker-failure-test-clean.json" | indent 4 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-saga-tracker
  namespace: {{ include "monitoring.namespace" . }}
  labels:
    {{- include "monitoring.grafana.labels" . | nindent 4 }}
    grafana_dashboard: "1"
data:
  saga-tracker-dashboard.json: |-
{{ .Files.Get "dashboards/saga-tracker-dashboard.json" | indent 4 }}
{{- end }}
